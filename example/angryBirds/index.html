<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Game Frame Example</title>
        <meta name="description" content="TODO"/>
        <meta name="viewport" content="width=device-width" />
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="mobile-web-app-capable" content="yes">
        <link rel="manifest" href="//www.carolinaignites.org/assets/js/manifest.json">
        <link href="//www.carolinaignites.org/assets/css/gameframe.css" rel="stylesheet">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    </head>
    <body>

    <svg id="game" bounce=1 friction=0.8>
            <circle id="bird" bounce="0.1" class="movable" vy=.2 vx=.2 cx=9 cy=760 r=25 img="angry.png"> </circle>
            <!-- <circle id="bird2" bounce="0" class="movable" vy=.2 vx=.2 cx=9 cy=660 r=25 img="angry.png"> </circle> -->
            <circle id="pig1" bounce="0.3" class="static" vy=.8 vx=.6 cx=550 cy=740 r=20 img="pig.png"> </circle>
            <circle id="pig2" bounce="0.3" class="static" vy=.8 vx=.6 cx=650 cy=740 r=20 img="pig.png"> </circle>
            <rect id="treasure" bounce="0" class="static" x=760 y=740 width = "60" height = "60" img="treasure.png"> </rect>
            <rect id="startBrick" bounce="0" class="static" width="10" height="22" x=65 y=760 img="pig.png"></rect>
            <rect class="brick" bounce="0.2" width = "10" height = "50" x=500 y=740 img= "wood.jpg"> </rect>
            <rect class="brick" bounce="0.2" width = "10" height = "50" x=600 y=740 img= "wood.jpg"> </rect>
            <rect class="brick" bounce="0.2" width = "10" height = "50" x=700 y=740 img= "wood.jpg"> </rect>
            <rect class="brick" bounce="0.2" width = "200" height = "10" x=600 y=700 img= "wood.jpg"> </rect>
            <!-- <rect class="brick" bounce="0.2" width = "10" height = "50" x=100 y=700 img= "wood.jpg"> </rect>
            <rect class="brick" bounce="0.2" width = "10" height = "50" x=100 y=700 img= "wood.jpg"> </rect>
            <rect class="brick" bounce="0.2" width = "10" height = "50" x=200 y=700 img= "wood.jpg"> </rect> -->

    </svg>
    <svg id="templates">
    </svg>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/PhysicsJS/0.7.0/physicsjs-full.min.js"></script>
    <script src="//www.carolinaignites.org/assets/js/interactive-custom.js"></script>
    <script src="//www.carolinaignites.org/assets/js/gameframe.js"></script>

    <script type="text/javascript">
        let scorableItems = 3;
        let startTimer = 0;
        new GameFrame({
                "name": "Angry Birds",
                "instructions": `Use the mouse to send the bird flying.`,
                "boundaries": true,
                "impulse": true,
                "gravity": true,
                "debug": true
            },function(gf){

              gf.collision("#bird", "#pig1", function(data,lookup){
                      gf.score(1);
                      scorableItems -= 1;
                      gf.remove(data["#pig1"]);
              })
              gf.collision("#bird", "#pig2", function(data,lookup){
                      gf.score(1);
                      scorableItems -= 1;
                      gf.remove(data["#pig2"]);
              })
              gf.collision("#bird", "#treasure", function(data,lookup){
                      gf.score(10);
                      scorableItems -= 1;
                      gf.remove(data["#treasure"]);
              })

             gf.registerKeys("#bird", {
                     'click': function(player, lookup){
                             player.state.vel.y -= .4;
                             player.state.vel.x += .4;
                             player.state.angular.vel = .02;
                     },
                     'right': function(player, lookup){
                             player.state.vel.y -= .4;
                             player.state.vel.x += .4;
                             player.state.angular.vel = .02;
                     }
            })

            gf.registerLoops(function(lookup){

                    if(scorableItems == 0){
                          gf.gameOver();
                    }

            });
        });

    </script>

    </body>
</html>
